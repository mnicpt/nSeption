/*jslint devel: true */define(function(){"use strict";function d(){D();b();v()}function v(){e=9;m();y();w();T();N()}function m(){t=g(u).slice(0,4);for(var e=0;e<a().length;e++)a()[e].className="marble "+t[e]+" hidden"}function g(e){var t=e.length,n,r,i=e.slice(0);for(var s=0;s<4;s++){r=Math.floor(Math.random()*t);n=i[s];i[s]=i[r];i[r]=n}return i}function y(){n().innerHTML="";for(var t=0;t<10;t++){var r=i().cloneNode(!0);r.style.display="flex";t===e&&(r.className="row current");n().appendChild(r)}}function b(){r().innerHTML="";for(var e=0;e<u.length;e++){var t=s().cloneNode(!0);t.style.display="block";t.className="marble "+u[e];r().appendChild(t)}}function w(){for(var e=0;e<l().length;e++)l()[e].addEventListener("dragstart",E)}function E(e){e.dataTransfer.setData("marble",e.target.className.split(" ")[1])}function S(e){e.preventDefault()}function x(e){e.preventDefault();var t=e.dataTransfer.getData("marble"),n=!1;n||(e.target.className="marble "+t)}function T(){for(var e=0;e<c().length;e++){c()[e].addEventListener("dragstart",E);c()[e].addEventListener("dragover",S);c()[e].addEventListener("drop",x)}}function N(){for(var e=0;e<h().length;e++)h()[e].addEventListener("click",C)}function C(e){k(e)}function k(e){if(A(e)){O();L()}}function L(){for(var t=0;t<c().length;t++){c()[t].removeEventListener("dragover",S);c()[t].removeEventListener("drop",x)}e--;_();T()}function A(e){for(var t=0;t<c().length;t++)if(c()[t].className.split(" ").length===1){e.preventDefault();return!1}return!0}function O(){var n={red:0,white:0};for(var r=0;r<c().length;r++)c()[r].className.split(" ")[1]===t[r]?n.red+=1:t.includes(c()[r].className.split(" ")[1])&&(n.white+=1);for(var r=0;r<n.red;r++)p()[r].className="pin red";for(var i=n.red;i<n.red+n.white;i++)p()[i].className="pin white";if(n.red===4){M();alert("You win!");return}if(e===0){M();alert("Sorry, try again.");return}}function M(){for(var e=0;e<a().length;e++)a()[e].className="marble "+a()[e].className.split(" ")[1]}function _(){for(var t=0;t<f().length;t++)f()[t].className="row";f()[e].className="row current"}function D(){o().addEventListener("click",function(){v()})}var e,t=[],n=function(){return document.querySelector(".game")},r=function(){return document.querySelector(".marbles")},i=function(){return document.querySelector(".row.template")},s=function(){return document.querySelector(".marble.template")},o=function(){return document.querySelector(".restartBtn")},u=["red","blue","yellow","orange","green","brown","white","black"],a=function(){return document.querySelectorAll(".solution .marble")},f=function(){return document.querySelectorAll(".game .row")},l=function(){return document.querySelectorAll(".marbles .marble")},c=function(){return document.querySelectorAll(".current .guess .marble")},h=function(){return document.querySelectorAll(".solveBtn")},p=function(){return document.querySelectorAll(".current.row .hints .pin")};return{init:d}});
